<div class="app-container">
  <header class="app-header">
    <div class="header-content">
      <div class="header-brand">
        <div class="brand-icon">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="8" fill="currentColor" opacity="0.1"/>
            <path d="M8 12h16M8 16h16M8 20h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="20" cy="20" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
        </div>
        <h1 class="brand-title">{{ title }}</h1>
      </div>
      
      <!-- Navigation Links -->
      <div class="header-nav">
        <a href="https://www.vanguardsignals.com" target="_blank" rel="noopener noreferrer" class="nav-link">Contact</a>
        <a href="https://github.com/ugubser/AIPlayground/blob/main/instructions.md" target="_blank" rel="noopener noreferrer" class="nav-link">Instructions</a>
      </div>
      
      <!-- Global Model Configuration -->
      <div class="header-controls" *ngIf="user$ | async">
        <div class="model-params-wrapper">
          <!-- First line: Temperature Control -->
          <div class="param-line">
            <label class="param-label" title="Controls randomness of responses. 0 = deterministic, 1 = very random. Lower values (0.1-0.3) for focused tasks, higher values (0.7-0.9) for creative tasks.">
              Temp:
              <div class="temp-control">
                <input 
                  type="range" 
                  min="0" 
                  max="1" 
                  step="0.1" 
                  [(ngModel)]="temperature"
                  (change)="onTemperatureChange()"
                  class="temp-slider">
                <input 
                  type="number" 
                  min="0" 
                  max="1" 
                  step="0.1" 
                  [(ngModel)]="temperature"
                  (change)="onTemperatureChange()"
                  class="temp-input">
              </div>
            </label>
          </div>
          
          <!-- Second line: Seed Control -->
          <div class="param-line">
            <label class="param-label" title="Random seed for reproducible responses. Set to -1 for random seed, or any positive number for deterministic output. Same seed + same input = identical response.">
              Seed:
              <input 
                type="number" 
                [(ngModel)]="seed"
                (change)="onSeedChange()"
                placeholder="-1 (random)"
                class="seed-input">
            </label>
            
            <!-- Show Prompts on same line -->
            <label class="show-prompts-checkbox">
              <input 
                type="checkbox" 
                [(ngModel)]="showPrompts"
                (change)="onShowPromptsToggle()">
              <span class="checkmark"></span>
              Show Prompts
            </label>
          </div>
        </div>
        <div class="model-config-wrapper">
          <app-dynamic-model-selector 
            [appName]="currentAppName"
            [showCurrentSelection]="false"
            (selectionChange)="onGlobalModelSelectionChange($event)">
          </app-dynamic-model-selector>
        </div>
      </div>

      <div class="header-auth">
        <div class="auth-section" *ngIf="user$ | async as user; else signInButton">
          <div class="user-status">
            <div class="status-indicator"></div>
            <span class="user-info">{{ user.displayName || user.email }}</span>
          </div>
          <button class="btn btn-ghost" (click)="signOut()">Sign Out</button>
        </div>
        <ng-template #signInButton>
          <div class="auth-section">
            <div *ngIf="loading" class="loading-state">
              <div class="loading-spinner"></div>
              <span class="loading-text">Connecting...</span>
            </div>
            <button *ngIf="!loading" class="btn btn-primary" (click)="signInWithGoogle()">
              Sign in with Google
            </button>
          </div>
        </ng-template>
      </div>
    </div>
  </header>

  <main class="main-content" *ngIf="user$ | async; else authRequired">
    <router-outlet></router-outlet>
  </main>

  <ng-template #authRequired>
    <div class="auth-required">
      <div class="auth-hero">
        <div class="hero-icon">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="64" height="64" rx="16" fill="var(--color-primary)" opacity="0.1"/>
            <path d="M20 28h24M20 32h24M20 36h16" stroke="var(--color-primary)" stroke-width="2" stroke-linecap="round"/>
            <circle cx="40" cy="36" r="6" stroke="var(--color-primary)" stroke-width="2" fill="none"/>
            <circle cx="40" cy="36" r="2" fill="var(--color-primary)"/>
          </svg>
        </div>
        <h2 class="hero-title">Welcome to AI Playground</h2>
        <p class="hero-description">
          Start exploring RAG, MCP, Vision and more with open(and closed-) source large language models. Please do not share sensitive data. The Google sign-in acts as a captcha mechanism to prevent abuse, I'm not storing any personal data.
          Please sign in with your Google account to continue.
        </p>
        <button class="btn btn-primary btn-lg" (click)="signInWithGoogle()" [disabled]="loading">
          <span *ngIf="!loading">Sign in with Google</span>
          <span *ngIf="loading" class="loading-content">
            <div class="loading-spinner"></div>
            Signing in...
          </span>
        </button>
      </div>
    </div>
  </ng-template>
</div>